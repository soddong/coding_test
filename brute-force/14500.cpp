/* 14500 테트로미노 */
#include <iostream>
#include <stdio.h>
#include <vector>
#include <algorithm>

using namespace std;

int main() {
	int N, M;
	cin >> N >> M; // N: 세로, M: 가로
	int v[500][500] = { 0, };
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < M; j++)
			cin >> v[i][j];
	}

	int t[19][4][2] = { // row, column
		{{0, 0}, {0, 1}, {0, 2}, {0, 3}}, // 1-1 v
		{{0, 0}, {1, 0}, {2, 0}, {3, 0}}, // 1-2 v
		{{0, 0}, {1, 0}, {0, 1}, {1, 1}}, // 2 v
		{{0, 0}, {1, 0}, {2, 0}, {2, 1}}, // 3-1 v
		{{0, 0}, {1, 0}, {0, 1}, {0, 2}}, // 3-2 v
		{{0, 0}, {0, 1}, {1, 1}, {2, 1}}, // 3-3 v
		{{1, 0}, {1, 1}, {1, 2}, {0, 2}}, // 3-4
		{{2, 0}, {2, 1}, {1, 1}, {0, 1}}, // 3-5 (reverse) v
		{{0, 0}, {0, 1}, {0, 2}, {1, 2}}, // 3-6 v
		{{0, 0}, {1, 0}, {2, 0}, {0, 1}}, // 3-7 v
		{{0, 0}, {1, 0}, {1, 1}, {1, 2}}, // 3-8 v
		{{0, 0}, {1, 0}, {1, 1}, {2, 1}}, // 4-1
		{{0, 1}, {1, 0}, {1, 1}, {2, 0}}, // 4-2 (4-1 reverse)
		{{1, 0}, {1, 1}, {0, 1}, {0, 2}}, // 4-3
		{{0, 0}, {0, 1}, {1, 1}, {1, 2}}, // 4-4 (4-3 reverse)
		{{0, 0}, {0, 1}, {0, 2}, {1, 1}}, // 5-1
		{{1, 0}, {1, 1}, {1, 2}, {0, 1}}, // 5-2 (5-1 reverse)
		{{1, 0}, {0, 1}, {1, 1}, {2, 1}}, // 5-3
		{{0, 0}, {1, 0}, {2, 0}, {1, 1}}, // 5-4 (5-3 reverse)
	};

	int answer = 0;
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < M; j++) {
			for (int k = 0; k < 19; k++) {
				int sum = 0, t_i, t_j;
				bool trigger = 1;
				for (int l = 0; l < 4; l++) {
					t_i = i + t[k][l][0];
					t_j = j + t[k][l][1];
					if (t_i < N && t_j < M) {
						sum += v[t_i][t_j];
					}
					else {
						trigger = 0;
						break;
					}
					if (trigger == 1) {
						answer = max(answer, sum);
					}
				}

				
			}
		}
	}
	cout << answer << "\n";
}